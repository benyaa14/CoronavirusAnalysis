%% Is There correlation between number of tests to the 
% number of deaths in Spain?

%get data
d=dea()
t=tes()

d=(d.')
t=(t.')



d_f(1:37)=0
d_f(38:100)=d



%linear regression
b1 = d_f/t
yCalc1 = b1*t;

%correlation coefficiant
R = corrcoef(d_f,t)
R

%Plot results
plot(t,yCalc1,'-r','LineWidth',3)
hold on
scatter(t,d_f)
txt = strcat('Not clear Correlation with coef of :  ', num2str(R(1,2)));
text(30000,800,txt)

title('Spain: Number of Tests vs. Number of Deaths')
xlabel('Number of tests')
ylabel('Nunber of deaths')
legend('Linear regression','Data','Location','NorthWest')




%%
%%conclusions:
% 1) Seems that there is no correlation between number of tests to number
% of deaths. 
% 2) In the begining of covid-19 in Spain they had small amount of tests.
%   We can assume that they did not do enough tests to detect all the the infected people.  
%   Later we can see that when they had more tests the amount of dead people
%   decreased.





 function y= tes()
 y=[1047.359736 %31/01/20
1047.359736
1047.359736
1047.359736
1396.479648
1745.59956
2094.719472
2443.839384
2792.959295
3142.079207
3491.199119
3840.319031
4189.438943
4538.558855
4887.678767
5236.798679
5585.918591
5935.038503
6284.158415
6633.278327
6982.398239
7331.518151
7680.638062
8029.757974
8378.877886
8727.997798
9077.11771
9426.237622
9775.357534
10124.47745
10473.59736
10822.71727
11171.83718
11520.95709
11870.07701
12219.19692
12568.31683
12917.43674
13266.55665
13615.67657
13964.79648
14313.91639
14663.0363
15012.15621
15361.27612
15710.39604
16059.51595
16408.63586
16757.75577
17106.87568
17455.9956
17805.11551
18154.23542
18503.35533
18852.47524
19201.59516
19550.71507
19899.83498
20248.95489
20598.0748
20947.19472
21296.31463
21645.43454
21994.55445
22343.67436
22692.79428
23041.91419
23294.07223
23546.23027
23798.38832
24050.54636
24302.70441
24554.86245
24807.02049
24461.24702
24115.47354
23769.70006
23423.92659
23078.15311
22732.37963
22386.60616
27838.92894
33291.25173
38743.57451
44195.8973
49648.22008
55100.54287
60552.86565
63815.85576
67078.84587
70341.83597
73604.82608
76867.81618
80130.80629
83393.7964
83393.7964
83393.7964
83393.7964
84242.72873
85091.66107 %09/05/20

     
 ]
 
 end
 
 
 function y= dea()
 y=[7   %08/03/20
7
13
24
37
51
68
88.002
115
144.001
180
227.999
282.999
346
420
492.998
566
632.006
692
738.996
776.997
801.999
820.996
835.002
835.998
827
807.005
782.999
758.003
735.999
713.998
690.997
668.001
644
623
607
595.001
585.009
574.001
553
527
499.998
468.003
445.996
424.002
405.996
384.001
364.999
345.999
331.998
312.003
294.001
280.001
264
244.001
228.998
218
209
207
211.001
208.001
208.001
196 %09/05/20
    ]
 
 end